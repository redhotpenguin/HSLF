2012/06/07 19:26:29 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (type='county' AND number = 'clackamas')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (221)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.ar.CActiveRecord] BallotItem.findAllByAttributes()
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT * FROM "ballot_item" "t" WHERE "t"."district_id"=7030
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [error] [php] Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php:266) (C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php:374)
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#1 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams()
#2 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): ApiController->runAction()
#3 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): ApiController->runActionWithFilters()
#4 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): ApiController->run()
#5 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController()
#6 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#7 C:\xampp\htdocs\HSLF\html\api.php(16): CWebApplication->run()
REQUEST_URI=//api/ballot_items/state/or/?district_types=county&districts=clackamas
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "errorHandler" application component
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (type='county' AND number = 'clackamas')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (221)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.ar.CActiveRecord] BallotItem.findAllByAttributes()
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT * FROM "ballot_item" "t" WHERE "t"."district_id"=7030
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [error] [php] Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php:266) (C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php:374)
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#1 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams()
#2 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): ApiController->runAction()
#3 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): ApiController->runActionWithFilters()
#4 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): ApiController->run()
#5 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController()
#6 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#7 C:\xampp\htdocs\HSLF\html\api.php(16): CWebApplication->run()
REQUEST_URI=//api/ballot_items/state/or/?district_types=county&districts=clackamas
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "errorHandler" application component
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (type='county' AND number = 'clackamas')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (221)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:29 [trace] [system.db.ar.CActiveRecord] BallotItem.findAllByAttributes()
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT * FROM "ballot_item" "t" WHERE "t"."district_id"=7030
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:29 [error] [php] Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php:266) (C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php:374)
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#1 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams()
#2 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): ApiController->runAction()
#3 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): ApiController->runActionWithFilters()
#4 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): ApiController->run()
#5 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController()
#6 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#7 C:\xampp\htdocs\HSLF\html\api.php(16): CWebApplication->run()
REQUEST_URI=//api/ballot_items/state/or/?district_types=county&districts=clackamas
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:29 [trace] [system.CModule] Loading "errorHandler" application component
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (type='county' AND number = 'clackamas') OR (type='city' AND number = 'portland')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (221)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:32 [trace] [system.db.ar.CActiveRecord] BallotItem.findAllByAttributes()
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT * FROM "ballot_item" "t" WHERE "t"."district_id" IN (7030, 7074)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [error] [php] Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php:266) (C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php:374)
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#1 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams()
#2 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): ApiController->runAction()
#3 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): ApiController->runActionWithFilters()
#4 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): ApiController->run()
#5 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController()
#6 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#7 C:\xampp\htdocs\HSLF\html\api.php(16): CWebApplication->run()
REQUEST_URI=//api/ballot_items/state/or/?district_types=county,city&districts=clackamas,portland
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "errorHandler" application component
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (type='county' AND number = 'clackamas') OR (type='city' AND number = 'portland')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (221)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
2012/06/07 19:26:32 [trace] [system.db.ar.CActiveRecord] BallotItem.findAllByAttributes()
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT * FROM "ballot_item" "t" WHERE "t"."district_id" IN (7030, 7074)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (264)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (96)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:26:32 [error] [php] Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php:266) (C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php:374)
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#1 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams()
#2 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): ApiController->runAction()
#3 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): ApiController->runActionWithFilters()
#4 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): ApiController->run()
#5 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController()
#6 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#7 C:\xampp\htdocs\HSLF\html\api.php(16): CWebApplication->run()
REQUEST_URI=//api/ballot_items/state/or/?district_types=county,city&districts=clackamas,portland
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:26:32 [trace] [system.CModule] Loading "errorHandler" application component
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (374)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:32:19 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:32:19 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:32:19 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 19:32:19 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:32:19 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:32:19 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:32:19 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:32:19 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 19:32:19 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (258)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
2012/06/07 19:32:19 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (258)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
2012/06/07 19:32:19 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (258)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
2012/06/07 19:32:19 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (state_abbr = 'or' type='congressional' AND number = '1') OR (state_abbr = 'or' type='city' AND number = 'portland')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (230)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (258)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
2012/06/07 19:32:19 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (230)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (258)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
2012/06/07 19:32:19 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near "type"
LINE 3: WHERE (state_abbr = 'or' type='congressional' AND number = '...
                                 ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = 'or' type='congressional' AND number = '1') OR (state_abbr = 'or' type='city' AND number = 'portland').
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (230)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (258)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
2012/06/07 19:32:19 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near "type"
LINE 3: WHERE (state_abbr = 'or' type='congressional' AND number = '...
                                 ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = 'or' type='congressional' AND number = '1') OR (state_abbr = 'or' type='city' AND number = 'portland')' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(230): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(258): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(94): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=//api/ballot_items/state/or/?district_types=congressional,city&districts=1,portland
---
2012/06/07 19:32:19 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 20:41:32 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:41:32 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:41:32 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:41:32 [error] [php] filter_input_array() [<a href='function.filter-input-array'>function.filter-input-array</a>]: Numeric keys are not allowed in the definition array (C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php:94)
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#1 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams()
#2 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): ApiController->runAction()
#3 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): ApiController->runActionWithFilters()
#4 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): ApiController->run()
#5 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController()
#6 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#7 C:\xampp\htdocs\HSLF\html\api.php(16): CWebApplication->run()
REQUEST_URI=/api/ballot_items/state/or/?districts=county/clackamas,city/portland
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:41:32 [trace] [system.CModule] Loading "errorHandler" application component
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (94)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:43:47 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:43:47 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:43:47 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:43:47 [error] [php] filter_input_array() [<a href='function.filter-input-array'>function.filter-input-array</a>]: Numeric keys are not allowed in the definition array (C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php:95)
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#1 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams()
#2 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): ApiController->runAction()
#3 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): ApiController->runActionWithFilters()
#4 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): ApiController->run()
#5 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController()
#6 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#7 C:\xampp\htdocs\HSLF\html\api.php(16): CWebApplication->run()
REQUEST_URI=/api/ballot_items/state/or/?districts=a%20brehger
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (95)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:43:47 [trace] [system.CModule] Loading "errorHandler" application component
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (95)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:45:04 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:45:04 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:45:04 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:45:04 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:45:04 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:45:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:45:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:45:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:45:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:45:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:45:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:45:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (state_abbr = '' AND type='portland' AND number = 'abc '')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (230)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:45:04 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (230)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:45:04 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'abc '')"
LINE 3: ...E (state_abbr = '' AND type='portland' AND number = 'abc '')
                                                               ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = '' AND type='portland' AND number = 'abc '').
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (230)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:45:04 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'abc '')"
LINE 3: ...E (state_abbr = '' AND type='portland' AND number = 'abc '')
                                                               ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = '' AND type='portland' AND number = 'abc '')' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(230): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts(NULL, Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(114): BallotItem->findAllByDistricts(NULL, Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=portland/abc%20'
---
2012/06/07 20:45:04 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 20:47:27 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:47:27 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:47:27 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:47:27 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:47:27 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:47:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:47:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:47:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:47:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:47:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:47:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:47:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (state_abbr = '' AND type='portland' AND number = 'abc '')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (230)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:47:27 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (230)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:47:27 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'abc '')"
LINE 3: ...E (state_abbr = '' AND type='portland' AND number = 'abc '')
                                                               ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = '' AND type='portland' AND number = 'abc '').
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (230)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:47:27 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'abc '')"
LINE 3: ...E (state_abbr = '' AND type='portland' AND number = 'abc '')
                                                               ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = '' AND type='portland' AND number = 'abc '')' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(230): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts(NULL, Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(114): BallotItem->findAllByDistricts(NULL, Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=portland/abc%20'
---
2012/06/07 20:47:27 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 20:48:01 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:48:01 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:48:01 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:48:01 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:48:01 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:48:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:48:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:48:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:48:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:48:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:48:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:48:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (state_abbr = '' AND type='portland' AND number = 'abc '')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (229)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:48:01 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (229)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:48:01 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'abc '')"
LINE 3: ...E (state_abbr = '' AND type='portland' AND number = 'abc '')
                                                               ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = '' AND type='portland' AND number = 'abc '').
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (229)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (114)
2012/06/07 20:48:01 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'abc '')"
LINE 3: ...E (state_abbr = '' AND type='portland' AND number = 'abc '')
                                                               ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = '' AND type='portland' AND number = 'abc '')' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(229): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts(NULL, Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(114): BallotItem->findAllByDistricts(NULL, Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=portland/abc%20'
---
2012/06/07 20:48:01 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 20:49:09 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:49:09 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:49:09 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:49:09 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:49:09 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:49:09 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:49:09 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:49:09 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:49:09 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:49:09 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:49:09 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:49:09 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (state_abbr = 'or' AND type='statewide'' AND number = '')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (231)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:49:09 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (231)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:49:09 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'statewide'' AND number = '')"
LINE 3: WHERE (state_abbr = 'or' AND type='statewide'' AND number = ...
                                          ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = 'or' AND type='statewide'' AND number = '').
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (231)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:49:09 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'statewide'' AND number = '')"
LINE 3: WHERE (state_abbr = 'or' AND type='statewide'' AND number = ...
                                          ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = 'or' AND type='statewide'' AND number = '')' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(231): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=statewide'
---
2012/06/07 20:49:09 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 20:52:04 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:52:04 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:52:04 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:52:04 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:04 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr:state_abbr
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (232)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:04 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (232)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:04 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near ":"
LINE 3: WHERE state_abbr:state_abbr
                        ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr:state_abbr.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (232)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:04 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near ":"
LINE 3: WHERE state_abbr:state_abbr
                        ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr:state_abbr' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(232): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=statewide
---
2012/06/07 20:52:04 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 20:52:13 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:52:13 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:52:13 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:52:13 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:13 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:13 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:13 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:13 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:52:13 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:13 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:13 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:13 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr:=state_abbr
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (232)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:13 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (232)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:13 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near ":="
LINE 3: WHERE state_abbr:=state_abbr
                        ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr:=state_abbr.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (232)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:52:13 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near ":="
LINE 3: WHERE state_abbr:=state_abbr
                        ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr:=state_abbr' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(232): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=statewide
---
2012/06/07 20:52:13 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 20:53:48 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:53:48 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:53:48 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:53:48 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:53:48 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:53:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:53:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:53:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:53:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:53:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:53:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:53:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE id=:id1 or id=:id2
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (235)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:53:48 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (235)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:53:48 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE id=:id1 or id=:id2.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (235)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:53:48 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE id=:id1 or id=:id2' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(235): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=statewide
---
2012/06/07 20:53:48 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 20:57:56 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:57:56 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:57:56 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 20:57:56 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:57:56 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:57:56 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:57:56 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:57:56 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 20:57:56 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:57:56 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:57:56 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:57:56 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE (state_abbr = 'or' AND type='portland' AND number = 'abc '')
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (241)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:57:56 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (241)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:57:56 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'abc '')"
LINE 3: ...(state_abbr = 'or' AND type='portland' AND number = 'abc '')
                                                               ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = 'or' AND type='portland' AND number = 'abc '').
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (241)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 20:57:56 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  unterminated quoted string at or near "'abc '')"
LINE 3: ...(state_abbr = 'or' AND type='portland' AND number = 'abc '')
                                                               ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE (state_abbr = 'or' AND type='portland' AND number = 'abc '')' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(241): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=portland/abc%20'
---
2012/06/07 20:57:56 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:00:02 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:02 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:02 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:02 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:02 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:02 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:02 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:02 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:02 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:02 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:02 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:02 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE 
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:02 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:02 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE .
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:02 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE ' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(253): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:00:02 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:00:04 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:04 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:04 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:04 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:04 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE 
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:04 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:04 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE .
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:04 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE ' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(253): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:00:04 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:00:10 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:10 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:10 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:10 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:10 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:10 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:10 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:10 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:10 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:10 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:10 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:10 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE 
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:10 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:10 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE .
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:10 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE ' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(253): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:00:10 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:00:11 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE 
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE .
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE ' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(253): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:00:11 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:00:11 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE 
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE .
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE ' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(253): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:00:11 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:00:11 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE 
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE .
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE ' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(253): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:00:11 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:00:11 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE 
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE .
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:11 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE ' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(253): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:00:11 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:00:12 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:12 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:12 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:00:12 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:12 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:00:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE 
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:12 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:12 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE .
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (253)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:00:12 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at end of input
LINE 3: WHERE 
              ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE ' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(253): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:00:12 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:03:44 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:03:44 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:03:44 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:03:44 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:44 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:$state_abbr
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (261)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:44 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (261)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:44 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near ":"
LINE 3: WHERE state_abbr=:$state_abbr
                         ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:$state_abbr.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (261)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:44 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near ":"
LINE 3: WHERE state_abbr=:$state_abbr
                         ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:$state_abbr' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(261): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:03:44 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:03:54 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:03:54 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:03:54 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:03:54 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:54 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:03:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr 
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (261)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:54 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (261)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:54 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr .
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (261)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:03:54 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr ' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(261): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:03:54 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:09:40 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:09:40 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:09:40 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:09:40 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:09:40 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:09:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:09:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:09:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:09:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:09:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:09:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:09:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:09:40 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:09:40 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:09:40 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(270): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:09:40 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:10:03 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:03 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:03 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:03 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(270): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:10:03 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:10:03 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:03 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:03 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:03 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:03 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(270): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:10:03 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:10:04 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:04 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:04 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:04 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(270): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:10:04 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:10:04 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:04 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:04 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:10:04 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (270)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:10:04 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(270): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:10:04 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:11:30 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:11:30 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:11:30 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:11:30 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:30 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:30 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:30 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:30 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:30 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:30 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:30 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:30 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1 AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:30 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:30 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1 AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:30 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1 AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(276): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:11:30 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:11:31 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:11:31 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:11:31 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:11:31 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:31 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:31 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:31 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:31 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:11:31 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:31 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:31 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:31 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1 AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:31 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:31 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1 AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:11:31 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1 AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(276): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:11:31 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:12:08 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:12:08 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:12:08 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:12:08 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:08 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1 AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:08 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:08 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1 AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:08 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1 AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(276): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:12:08 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:12:41 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:12:41 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:12:41 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:12:41 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:41 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:41 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:41 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:41 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:41 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:41 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:41 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:41 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (275)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:41 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (275)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:41 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (275)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:41 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(275): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:12:41 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:12:51 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:12:51 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:12:51 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:12:51 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:51 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:51 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:51 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:51 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:12:51 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:51 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:51 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:51 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (275)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:51 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (275)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:51 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (275)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:12:51 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district  OR state_abbr=:state_abbr AND type=:district_type1 AND number=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(275): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:12:51 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:13:35 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:13:35 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:13:35 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:13:35 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:13:35 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:13:35 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:13:35 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:13:35 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:13:35 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:13:35 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:13:35 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:13:35 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (275)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:13:35 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (275)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:13:35 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (275)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:13:35 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(275): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:13:35 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:15:08 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:15:08 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:15:08 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:15:08 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:08 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:08 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (273)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:08 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (273)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:08 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (273)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:08 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'...
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0 OR type=:district_type1 AND district=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(273): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:15:08 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:15:44 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:15:44 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:15:44 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:15:44 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:44 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:15:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:44 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (273)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:44 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (273)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:44 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (273)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:15:44 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[0A000]: Feature not supported: 7 ERROR:  input of anonymous composite types is not implemented
LINE 3: ...ERE state_abbr='or'  AND type='city' AND district='portland'
                                                             ^. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND district=:district0' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(273): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:15:44 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:16:32 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:16:32 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:16:32 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:16:32 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:16:32 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:16:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:16:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:16:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:16:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:16:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:16:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:16:32 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:16:32 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:16:32 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:16:32 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr AND type=:district_type AND number=:district' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(276): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland
---
2012/06/07 21:16:32 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:17:48 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:48 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:48 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:48 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:48 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:48 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1 OR type=:district_type2 AND number=:district2
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:48 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:48 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1 OR type=:district_type2 AND number=:district2.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:48 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1 OR type=:district_type2 AND number=:district2' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(276): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas,upper_house/foo
---
2012/06/07 21:17:48 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:17:49 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:49 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:49 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:49 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:49 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:49 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:49 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:49 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:49 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:49 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:49 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:49 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1 OR type=:district_type2 AND number=:district2
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:49 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:49 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1 OR type=:district_type2 AND number=:district2.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:49 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1 OR type=:district_type2 AND number=:district2' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(276): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas,upper_house/foo
---
2012/06/07 21:17:49 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:17:53 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:53 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:53 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:53 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:53 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:53 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:53 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:53 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:53 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:53 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:53 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:53 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1 OR type=:district_type2 AND number=:district2
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:53 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:53 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1 OR type=:district_type2 AND number=:district2.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:53 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1 OR type=:district_type2 AND number=:district2' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(276): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas,
---
2012/06/07 21:17:53 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:17:54 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:54 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:54 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:17:54 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:54 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:17:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:54 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:54 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (276)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:17:54 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(276): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:17:54 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:22:29 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:22:29 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:22:29 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:22:29 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:22:29 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:22:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:22:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:22:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:22:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:22:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:22:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:22:29 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (285)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:22:29 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (285)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:22:29 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (285)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:22:29 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(285): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:22:29 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:23:21 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:23:21 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:23:21 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:23:21 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:21 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:21 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:21 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:21 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:21 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:21 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:21 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:21 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (287)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:21 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (287)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:21 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (287)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:21 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(287): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:23:21 [trace] [system.CModule] Loading "errorHandler" application component
2012/06/07 21:23:43 [trace] [system.CModule] Loading "log" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:23:43 [trace] [system.CModule] Loading "request" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:23:43 [trace] [system.CModule] Loading "urlManager" application component
in C:\xampp\htdocs\HSLF\html\api.php (16)
2012/06/07 21:23:43 [trace] [system.CModule] Loading "db" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:43 [trace] [system.db.CDbConnection] Opening DB connection
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:43 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:43 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:43 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (39)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (74)
2012/06/07 21:23:43 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:43 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:43 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (23)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:43 [trace] [system.db.CDbCommand] Querying SQL: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (287)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:43 [trace] [system.CModule] Loading "coreMessages" application component
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (287)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:43 [error] [system.db.CDbCommand] CDbCommand::fetchAll() failed: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1.
in C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php (287)
in C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php (259)
in C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php (102)
2012/06/07 21:23:43 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: SELECT "id"
FROM "district"
WHERE state_abbr=:state_abbr  AND type=:district_type0 AND number=:district0 OR type=:district_type1 AND number=:district1' in C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php:528
Stack trace:
#0 C:\xampp\htdocs\HSLF\framework\db\CDbCommand.php(390): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 C:\xampp\htdocs\HSLF\html\protected\shared\models\District.php(287): CDbCommand->queryAll()
#2 C:\xampp\htdocs\HSLF\html\protected\shared\models\BallotItem.php(259): District->getIdsByDistricts('or', Array, Array)
#3 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(102): BallotItem->findAllByDistricts('or', Array, Array)
#4 C:\xampp\htdocs\HSLF\html\protected\api\controllers\ApiController.php(74): ApiController->_getBallotItems(Array)
#5 C:\xampp\htdocs\HSLF\framework\web\actions\CInlineAction.php(50): ApiController->actionView()
#6 C:\xampp\htdocs\HSLF\framework\web\CController.php(309): CInlineAction->runWithParams(Array)
#7 C:\xampp\htdocs\HSLF\framework\web\CController.php(287): CController->runAction(Object(CInlineAction))
#8 C:\xampp\htdocs\HSLF\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#9 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(276): CController->run('view')
#10 C:\xampp\htdocs\HSLF\framework\web\CWebApplication.php(135): CWebApplication->runController('api/view')
#11 C:\xampp\htdocs\HSLF\framework\base\CApplication.php(162): CWebApplication->processRequest()
#12 C:\xampp\htdocs\HSLF\html\api.php(16): CApplication->run()
#13 {main}
REQUEST_URI=/api/ballot_items/state/or/?districts=city/portland,county/clackamas
---
2012/06/07 21:23:43 [trace] [system.CModule] Loading "errorHandler" application component
